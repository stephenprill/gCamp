<div class = "container">
  <div class = "page-header">
    <h3> <%= @project.name %>: Manage Members</h3>
  </div>

  <ol class="breadcrumb">
    <li><%= link_to "Projects", projects_path %></li>
    <li><%= link_to @project.name, project_path(@project) %> </li>
    <li class="active">Memberships</li>
  </ol>

    <% if notice.is_a? String %>
    <div class="text-center alert alert-info"><%= notice %></div>
    <% end %>
    <%= render "shared/errors", instance: @membership %>

    <div class="well form-inline col-md-6">
    <%= form_for [@project, @membership] do |f| %>

    <div class="form-group">
      <%= f.collection_select :user_id, User.all, :id, :full_name, {include_blank: "Please add user..."},  {class: "form-control"}  %>
    </div>
    <div class="form-group">
      <%= f.select :role, options_for_select(["Member","Owner"]), {include_blank: true}, {class: "form-control"}%>
    </div>

    <%= f.submit "Add New Member", class: 'btn btn-primary' %>

    </div>
      <% end %>

  <table class="table">
    <% @project.users.each do |user| %>
      <% user.memberships.where(project_id: @project.id).each do |membership| %>
        <%= form_for [@project, membership] do |f| %>
        <tr><td class="col-sm-2"><%= link_to "#{user.full_name}",user_path(user) %></td>
          <td class="col-sm-2"><%= f.select :role, ["member", "owner"],{},{class: "form-control"} %></td>
          <td class="col-sm-2"><%= f.submit class: "btn btn-primary" %></td>
          <td><%= link_to project_membership_path(@project, membership), confirm: 'Are you sure ?', method: :delete do %>
          <i class="glyphicon glyphicon-remove"></i>
        </td></tr>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </table>
</div>
